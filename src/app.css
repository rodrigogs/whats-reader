@import 'tailwindcss';

/* Enable class-based dark mode (for manual toggle) */
@custom-variant dark (&:where(.dark, .dark *));

/* Custom theme colors - WhatsApp-inspired */
@theme {
	--color-whatsapp-green: #25D366;
	--color-whatsapp-dark-green: #075E54;
	--color-whatsapp-light-green: #DCF8C6;
	--color-whatsapp-teal: #128C7E;
	--color-chat-bg: #ECE5DD;
	--color-message-out: #DCF8C6;
	--color-message-in: #FFFFFF;
}

/* Dark mode theme overrides */
.dark {
	--color-chat-bg: #0B141A;
	--color-message-out: #005C4B;
	--color-message-in: #202C33;
}

/* Chat background with WhatsApp-style pattern */
.chat-bg {
	background-color: var(--color-chat-bg);
	background-image: url('/chat-bg.svg');
	background-repeat: repeat;
}

.dark .chat-bg {
	background-image: url('/chat-bg-dark.svg');
}

/* Electron window dragging support */
.electron-drag {
	-webkit-app-region: drag;
}

.electron-no-drag {
	-webkit-app-region: no-drag;
}

/* Base styles */
html,
body {
	height: 100%;
	margin: 0;
}

/* Scrollbar styling */
::-webkit-scrollbar {
	width: 12px;
}

::-webkit-scrollbar-track {
	background: rgba(0, 0, 0, 0.05);
	border-radius: 6px;
}

::-webkit-scrollbar-thumb {
	background-color: rgba(0, 0, 0, 0.3);
	border-radius: 6px;
	border: 2px solid transparent;
	background-clip: padding-box;
}

::-webkit-scrollbar-thumb:hover {
	background-color: rgba(0, 0, 0, 0.5);
}

/* Dark mode scrollbar */
.dark ::-webkit-scrollbar-track {
	background: rgba(255, 255, 255, 0.05);
}

.dark ::-webkit-scrollbar-thumb {
	background-color: rgba(255, 255, 255, 0.3);
}

.dark ::-webkit-scrollbar-thumb:hover {
	background-color: rgba(255, 255, 255, 0.5);
}

/* Search highlight animation */
@keyframes search-highlight {
	0% {
		transform: scale(1);
		box-shadow: 0 0 0 0 rgba(18, 140, 126, 0.7);
	}
	50% {
		transform: scale(1.02);
		box-shadow: 0 0 0 8px rgba(18, 140, 126, 0);
	}
	100% {
		transform: scale(1);
		box-shadow: 0 0 0 0 rgba(18, 140, 126, 0);
	}
}

.animate-search-highlight {
	animation: search-highlight 0.6s ease-out;
}

/* Slow spin animation for search progress */
@keyframes spin-slow {
	from {
		transform: rotate(0deg);
	}
	to {
		transform: rotate(360deg);
	}
}

.animate-spin-slow {
	animation: spin-slow 1.5s linear infinite;
}

/* Fade in up animation for floating buttons */
@keyframes fade-in-up {
	from {
		opacity: 0;
		transform: translateY(20px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.animate-fade-in-up {
	animation: fade-in-up 0.4s ease-out;
}

/* Sidebar slide animation */
.sidebar-panel {
	transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
				transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
				opacity 0.25s ease,
				margin 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	overflow: hidden;
}

/* Desktop sidebar collapse */
@media (min-width: 768px) {
	.sidebar-panel.sidebar-open {
		width: 20rem; /* w-80 */
	}
	
	.sidebar-panel.sidebar-closed {
		width: 0;
		margin-left: -1px; /* Hide border */
		opacity: 0;
		pointer-events: none;
	}
}

/* Mobile sidebar - slide overlay */
@media (max-width: 767px) {
	.sidebar-panel {
		transform: translateX(-100%);
		opacity: 0;
		position: fixed;
		top: 0;
		left: 0;
		bottom: 0;
		z-index: 40;
		display: flex !important;
		width: 20rem; /* w-80 */
	}
	
	/* Account for Electron macOS titlebar */
	.sidebar-panel.electron-mac {
		top: 38px;
	}
	
	.sidebar-panel.sidebar-open {
		transform: translateX(0);
		opacity: 1;
	}
	
	.sidebar-panel.sidebar-closed {
		transform: translateX(-100%);
		opacity: 0;
		pointer-events: none;
	}
}

/* Bookmarks panel slide animation (mirrors sidebar) */
.bookmarks-panel {
	transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
				transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), 
				opacity 0.25s ease,
				margin 0.3s cubic-bezier(0.4, 0, 0.2, 1);
	overflow: hidden;
}

/* Desktop bookmarks collapse */
@media (min-width: 768px) {
	.bookmarks-panel.bookmarks-open {
		width: 20rem; /* w-80 */
	}
	
	.bookmarks-panel.bookmarks-closed {
		width: 0;
		margin-right: -1px; /* Hide border */
		opacity: 0;
		pointer-events: none;
	}
}

/* Mobile bookmarks - slide overlay from right */
@media (max-width: 767px) {
	.bookmarks-panel {
		transform: translateX(100%);
		opacity: 0;
		position: fixed;
		top: 0;
		right: 0;
		bottom: 0;
		z-index: 40;
		display: flex !important;
		width: 20rem; /* w-80 */
	}
	
	/* Account for Electron macOS titlebar */
	.bookmarks-panel.electron-mac {
		top: 38px;
	}
	
	.bookmarks-panel.bookmarks-open {
		transform: translateX(0);
		opacity: 1;
	}
	
	.bookmarks-panel.bookmarks-closed {
		transform: translateX(100%);
		opacity: 0;
		pointer-events: none;
	}
}
